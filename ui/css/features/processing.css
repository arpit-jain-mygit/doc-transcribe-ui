/* ===============================
   PROCESSING HERO MODE
   =============================== */

/* Hero container positioning */
body.processing-active .processing-panel {
  position: relative;
  z-index: 20;

  transform: scale(1.02);
  box-shadow:
    0 20px 40px rgba(0, 0, 0, 0.18),
    0 0 0 1px rgba(37, 99, 235, 0.15);

  border-color: var(--primary);
}

/* Soft radial glow behind hero */
body.processing-active .processing-panel::after {
  content: "";
  position: absolute;
  inset: -28px;
  z-index: -1;

  border-radius: 24px;
  background: radial-gradient(
    circle at top center,
    rgba(37, 99, 235, 0.22),
    transparent 70%
  );
}

/* Hero title emphasis */
body.processing-active .processing-panel h2 {
  color: var(--primary);
  letter-spacing: 0.8px;
}

/* ===============================
   BACKGROUND DE-EMPHASIS
   =============================== */

/* Keep container clickable OFF */
body.processing-active #appContent {
  pointer-events: none;
}

/* Allow hero interaction */
body.processing-active .processing-panel,
body.processing-active .processing-panel * {
  pointer-events: auto;
}

/* Fade & soften all non-hero cards */
body.processing-active .card:not(.processing-panel) {
  opacity: 0.6;
  filter: grayscale(0.25) blur(0.3px);
  transform: scale(0.995);
}

/* Animate dimming once */
body.processing-enter .card:not(.processing-panel) {
  transition:
    opacity 0.25s ease,
    filter 0.25s ease,
    transform 0.25s ease;
}

/* ===============================
   HERO STATUS LINE
   =============================== */

body.processing-active #status {
  font-size: 22px;
  font-weight: 800;
  text-align: center;
  margin-bottom: 6px;
}

body.processing-active #stage {
  text-align: center;
  font-size: 14px;
  color: var(--muted);
  margin-bottom: 14px;
}

/* ===============================
   HERO PROGRESS BAR
   =============================== */

body.processing-active progress {
  height: 20px;
  margin-top: 12px;
}

/* Animated sheen while running */
body.processing-active progress::-webkit-progress-value {
  background-image: linear-gradient(
    110deg,
    rgba(255, 255, 255, 0.15) 25%,
    rgba(255, 255, 255, 0.35) 37%,
    rgba(255, 255, 255, 0.15) 63%
  );
  background-size: 200% 100%;
  animation: progress-sheen 2.2s linear infinite;
}

body.processing-active progress::-moz-progress-bar {
  background-image: linear-gradient(
    110deg,
    rgba(255, 255, 255, 0.15) 25%,
    rgba(255, 255, 255, 0.35) 37%,
    rgba(255, 255, 255, 0.15) 63%
  );
  background-size: 200% 100%;
  animation: progress-sheen 2.2s linear infinite;
}

/* ===============================
   COMPLETION STATE
   =============================== */

body.processing-complete .processing-panel {
  box-shadow:
    0 18px 32px rgba(22, 163, 74, 0.25),
    0 0 0 1px rgba(22, 163, 74, 0.3);
}

body.processing-complete .processing-panel::after {
  background: radial-gradient(
    circle,
    rgba(22, 163, 74, 0.25),
    transparent 70%
  );
}

/* Fade progress bar out cleanly */
body.processing-complete progress {
  opacity: 0;
  height: 0;
  margin-top: 0;
  transition:
    opacity 0.35s ease,
    height 0.35s ease,
    margin 0.35s ease;
}

/* ===============================
   KEYFRAMES
   =============================== */

@keyframes progress-sheen {
  from {
    background-position: 200% 0;
  }
  to {
    background-position: -200% 0;
  }
}
