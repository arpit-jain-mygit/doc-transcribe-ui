<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Doc Transcribe>>></title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
    }

    button {
      margin-right: 8px;
    }

    progress {
      width: 320px;
      height: 18px;
    }
  </style>
</head>

<body>

  <h3>Doc Transcribe >>>>>>>>>>></h3>

<input type="file" id="file" />
<button onclick="upload('OCR')">OCR</button>
<button onclick="upload('TRANSCRIPTION')">Transcribe</button>

  <hr>

  <div id="statusBox" style="display:none;">
    <p><b>Status:</b> <span id="status"></span></p>
    <p><b>Stage:</b> <span id="stage"></span></p>
    <progress id="progress" value="0" max="100"></progress>
  </div>
  

  <script>
const API = "https://doc-transcribe-api.onrender.com";

async function upload(type) {
  const file = document.getElementById("file").files[0];
  if (!file) return alert("Select a file");

  const fd = new FormData();
  fd.append("file", file);
  fd.append("type", type);

  const res = await fetch(`${API}/upload`, {
    method: "POST",
    body: fd,
  });

  if (!res.ok) {
    const t = await res.text();
    throw new Error(t);
  }

  const data = await res.json();
  alert("JOB ID: " + data.job_id);
}
</script>


</body>

</html>