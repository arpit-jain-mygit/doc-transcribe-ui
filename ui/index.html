<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Doc Transcribe>>></title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
    }

    button {
      margin-right: 8px;
    }

    progress {
      width: 320px;
      height: 18px;
    }
  </style>
</head>

<body>

  <h3>Doc Transcribe >>>>>>>>>>></h3>

  <input type="file" id="file" />

  <br><br>

  <button onclick="upload('OCR')">OCR</button>
<button onclick="upload('TRANSCRIPTION')">Transcribe</button>

  <hr>

  <div id="statusBox" style="display:none;">
    <p><b>Status:</b> <span id="status"></span></p>
    <p><b>Stage:</b> <span id="stage"></span></p>
    <progress id="progress" value="0" max="100"></progress>
  </div>

  <script>
    const API = "https://doc-transcribe-api.onrender.com";

    async function upload(type) {
      const fileInput = document.getElementById("file");
      if (!fileInput.files.length) {
        alert("Select a file");
        return;
      }

      const form = new FormData();
      form.append("file", fileInput.files[0]); // MUST be "file"
      form.append("type", type);               // MUST be "type"

      const res = await fetch(`${API}/upload`, {
        method: "POST",
        body: form,          // âœ… DO NOT set headers
      });

      const data = await res.json();
      console.log(data);
    }
  </script>


</body>

</html>